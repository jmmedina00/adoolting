<h1 th:text="${group.name}"></h1>
<p>Created by: <span th:text="${group.interactor.getFullName()}"></span></p>
<p th:text="${group.class.name}"></p>

<h3>Pending</h3>
<ul>
  <li
    th:each="interaction : ${cInteractions}"
    th:if="${interaction.confirmedAt == null}"
    th:object="${interaction}"
  >
    <span th:if="*{interactor.id} == ${group.interactor.id}">
      <span th:text="*{receiverInteractor.getFullName()}"></span>
      Pending
    </span>
    <span th:if="*{receiverInteractor.id} == ${group.interactor.id}">
      <span th:text="*{interactor.getFullName()}"></span>
      <form
        th:action="@{/network/{interaction}(interaction=*{id})}"
        method="post"
      >
        <input
          type="text"
          name="isAccepted"
          value="true"
          style="display: none"
        />
        <input
          type="text"
          name="goToProfile"
          value="false"
          style="display: none"
        />
        <button type="submit">Accept</button>
      </form>
      <form
        th:action="@{/network/{interaction}(interaction=*{id})}"
        method="post"
      >
        <input
          type="text"
          name="isAccepted"
          value="false"
          style="display: none"
        />
        <input
          type="text"
          name="goToProfile"
          value="false"
          style="display: none"
        />
        <button type="submit">Ignore</button>
      </form>
    </span>
    <span th:text="${group.interactor.id}"></span>
  </li>
</ul>

<h3>Members</h3>
<ul>
  <li
    th:each="interaction : ${cInteractions}"
    th:unless="${interaction.confirmedAt == null}"
    th:object="${interaction}"
  >
    <span
      th:unless="*{interactor.id} == ${group.interactor.id}"
      th:text="*{interactor.getFullName()}"
    >
    </span>
    <span
      th:unless="*{receiverInteractor.id} == ${group.interactor.id}"
      th:text="*{receiverInteractor.getFullName()}"
    >
    </span>
    <span th:text="*{id}"></span>
    <form th:action="@{/interaction/{id}/delete(id=*{id})}" method="post">
      <button type="submit">Delete</button>
    </form>
  </li>
</ul>

<form
  th:object="${form}"
  th:action="@{/group/{id}(id=${group.id})}"
  th:method="post"
>
  <div>
    <label>Name:</label>
    <input type="text" th:field="*{name}" />
    <p
      th:if="${#fields.hasErrors('name')}"
      th:text="${#fields.errors('name')[0]}"
    >
      Validation error
    </p>
  </div>
  <div>
    <label>Description:</label>
    <textarea th:field="*{description}"></textarea>
    <p
      th:if="${#fields.hasErrors('description')}"
      th:text="${#fields.errors('description')[0]}"
    >
      Validation error
    </p>
  </div>
  <div
    th:if="${form.class.name == 'io.github.jmmedina00.adoolting.dto.group.NewEvent'}"
  >
    <!-- To be updated with proper map -->
    <label>Location:</label>
    <input type="text" th:field="*{location}" />
    <p
      th:if="${#fields.hasErrors('location')}"
      th:text="${#fields.errors('location')[0]}"
    >
      Validation error
    </p>
  </div>
  <div
    th:if="${form.class.name == 'io.github.jmmedina00.adoolting.dto.group.NewEvent'}"
  >
    <label>Date:</label>
    <input type="date" th:field="*{date}" />
    <p
      th:if="${#fields.hasErrors('date')}"
      th:text="${#fields.errors('date')[0]}"
    >
      Validation error
    </p>
  </div>
  <div
    th:if="${form.class.name == 'io.github.jmmedina00.adoolting.dto.group.NewEvent'}"
  >
    <label>Time:</label>
    <input type="time" th:field="*{time}" />
    <p
      th:if="${#fields.hasErrors('time')}"
      th:text="${#fields.errors('time')[0]}"
    >
      Validation error
    </p>
  </div>
  <div
    th:if="${form.class.name == 'io.github.jmmedina00.adoolting.dto.group.NewEvent'}"
    style="display: none"
  >
    <input type="hidden" th:field="*{offsetFromUTC}" id="offset" />
    <p
      th:if="${#fields.hasErrors('offsetFromUTC')}"
      th:text="${#fields.errors('offsetFromUTC')[0]}"
    >
      Validation error
    </p>
  </div>
  <button type="submit">Create</button>
</form>
<script>
  const offsetField = document.querySelector('#offset')
  offsetField.setAttribute('value', new Date().getTimezoneOffset())
</script>
