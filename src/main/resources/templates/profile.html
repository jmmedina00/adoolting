<p>
  Watching profile of:
  <span th:text="${person.getFullName()}"></span>
</p>
<p>
  <span th:if="${status}" th:text="${status.content}"></span>
  <span th:unless="${status}">Not set</span>
</p>
<ul>
  <li th:each="friend : ${friends}">
    <span
      th:unless="${friend.interactor.id == person.id}"
      th:text="${friend.interactor.getFullName()}"
    >
    </span>
    <span
      th:unless="${friend.receiverInteractor.id == person.id}"
      th:text="${friend.receiverInteractor.getFullName()}"
    >
    </span>
  </li>
</ul>
<span th:unless="${friendship == null}">
  <span
    th:if="${friendship.confirmedAt == null && friendship.ignoredAt == null}"
  >
    <span th:if="${friendship.receiverInteractor.id == person.id}">
      Pending
    </span>
    <span th:unless="${friendship.receiverInteractor.id == person.id}">
      <form
        th:action="@{/network/{friendship}(friendship=${friendship.id})}"
        method="post"
      >
        <input
          type="text"
          name="isAccepted"
          value="true"
          style="display: none"
        />
        <input
          type="text"
          name="goToProfile"
          value="true"
          style="display: none"
        />
        <button type="submit">Accept</button>
      </form>
      <form
        th:action="@{/network/{friendship}(friendship=${friendship.id})}"
        method="post"
      >
        <input
          type="text"
          name="isAccepted"
          value="false"
          style="display: none"
        />
        <input
          type="text"
          name="goToProfile"
          value="true"
          style="display: none"
        />
        <button type="submit">Ignore</button>
      </form>
    </span>
  </span>
  <span th:unless="${friendship.confirmedAt == null}">Confirmed</span>
  <!-- <span th:unless="${friendship.ignoredAt == null}">Ignored</span> -->
</span>

<form
  th:if="${(friendship == null && cInteraction.personId != 0) || friendship?.ignoredAt != null}"
  th:object="${cInteraction}"
  th:action="@{/network}"
  method="post"
>
  <input type="text" th:field="*{personId}" style="display: none" />
  <button type="submit">Add as friend</button>
</form>

<form
  method="post"
  th:object="${newPost}"
  th:action="@{/profile/{personId}(personId=${person.id})}"
  enctype="multipart/form-data"
>
  <div>
    <label>New post</label>
    <textarea th:field="*{contents}"></textarea>
    <input
      type="file"
      th:field="*{media}"
      accept="image/png, image/jpeg"
      multiple
    />
  </div>
  <button type="submit">Send</button>
</form>
<div th:each="post : ${posts}">
  <h3>
    <span th:text="${post.interactor.getFullName()}"> </span>

    <span th:if="${post.receiverInteractor}">
      ->
      <span th:text="${post.receiverInteractor.getFullName()}"></span>
    </span>
  </h3>
  <!-- instanceOf does not work reliably between restarts -->
  <p th:text="${post.getFirstParagraph()}"></p>
  <p th:if="${#arrays.length(post.getParagraphs()) > 1}">...</p>
  <img
    th:each="medium : ${post.media}"
    th:src="@{/media/thumbnail/256/{id}(id=${medium.id})}"
  />
  <p th:text="${post.class.name}"></p>
  <p><span th:text="${post.comments.size()}"></span> comments</p>
</div>
